<head>

  <link rel="stylesheet" href="/static/style.css">

    <!--  SUNBURST LIBRARIES -->
    <script src="/static/sunburst.js"></script>
    <script src="/static/dataset_loader.js"></script>
    <script src="https://unpkg.com/d3"></script>

    <!--  COLLAPSIBLE TREE LIBRARIES -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.0/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="https://cdn.datatables.net/1.12.0/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.12.0/js/dataTables.bootstrap4.min.js"></script>
    <!--<script src="dndTree.js"></script>-->
</head>



<body>
  <div class="header">

    <!--Content before waves-->
    <div class="inner-header flex">
    <!--Just the logo.. Don't mind this-->
      <img src="/static/Images/logo_dais_bianco.png" onclick="location.reload();" class="logo">
    </div>


    <!--Waves Container-->
    <div>
    <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
    <defs>
    <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
    </defs>
    <g class="parallax">
    <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(255,255,255,0.7" />
    <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(255,255,255,0.5)" />
    <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(255,255,255,0.3)" />
    <use xlink:href="#gentle-wave" x="48" y="7" fill="#fff" />
    </g>
    </svg>
    </div>
    <!--Waves end-->

    </div>
    <!--Header ends-->

    <!--Content starts-->

    <!--Content ends-->


  <div class="" style="margin: 23px;">

    <div class="row">


      <div class="col-lg-12" >
        <fieldset class="border p-2" id="load_dataset">
        <legend class="w-auto" style="font-size: 20px!important; margin-bottom: 0px;"> STEP 1: Upload Dataset
        </legend>
        <div class="input-group">
          <input  class="form-control form-control-lg" type="file" name="file2" id="file2">
          <button class="btn btn-primary" type="button" id="load1" onclick="load_data()" >Upload</button>
        </div>
       </fieldset>
      </div>



      <div class="col-lg-12" >
        <fieldset class="border p-2" id="load_json">
        <legend class="w-auto" style="font-size: 20px!important; margin-bottom: 0px;"> STEP 2: Upload results and Generate Plots
        </legend>
        <div class="input-group">
          <input  class="form-control form-control-lg" type="file" name="file1" id="file1"  disabled="true">
          <button class="btn btn-primary" type="button" id="load2" onclick="createchart()" disabled="true">Upload</button>
        </div>
       </fieldset>
      </div>


      <div class="col-lg-6" id="contenitore">
        <div id="tree-container"></div>
      </div>
      <div class="col-lg-6">
        <div id="sunburst"></div>
      </div>

    <!-- Icona del tutorial -->
    <div id="tutorial-button">
        <img src="/static/Images/info.gif" alt="Tutorial Icon">
    </div>

    <!-- Overlay del tutorial -->
    <div id="tutorial-overlay">
        <div id="tutorial-content">
           <img id="close-btn" src="/static/Images/close.png" alt="Chiudi" />
           <center><h2>Tutorial</h2></center>
            <p id="tutorial-instructions">This Tutorial will provide you with 1) the definition of Relaxed Functional Dependency (RFD) 2) An introduction to the Ryan Tool, and  3) The description of the task you have to perform for our experiment.</p>
            <h3>Relaxed Functional Dependencies</h3>
            <p id="tutorial-instructions">In relational databases, a <b>Relaxed Functional Dependency (RFD) </b> is an integrity constraint X -> Y  between two <b>sets of attributes X and Y</b>, meaning that if <b>two tuples have similar value on X, then they must have similar values on Y</b>. X is named <b>Left Hand Side (LHS)</b>, while Y is the <b>Right Hand Side (RHS)</b>. Two values of an attribute are similar if their distance is  lower than the <b>similarity threshold</b> defined on that attribute. The function to assess similarity is edit distance for strings and difference for numbers. </p> 
            <p id="tutorial-instructions">For example, consider the following dataset: </p>
<!-- Esempio Tabellare -->
<table id="rfd-example-table" class="table table-striped table-bordered" style="width:100%; border-collapse: collapse;">
  <thead>
      <tr>
          <th style="border: 1px solid #000; padding: 8px;">#</th>
          <th style="border: 1px solid #000; padding: 8px;">Model</th>
          <th style="border: 1px solid #000; padding: 8px;">Year</th>
          <th style="border: 1px solid #000; padding: 8px;">Price</th>
          <th style="border: 1px solid #000; padding: 8px;"># Owners</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="border: 1px solid #000; padding: 8px;">1</td>
          <td style="border: 1px solid #000; padding: 8px;">Renault Clio</td>
          <td style="border: 1px solid #000; padding: 8px;">2018</td>
          <td style="border: 1px solid #000; padding: 8px;">8000</td>
          <td style="border: 1px solid #000; padding: 8px;">1</td>

      </tr>
      <tr>
          <td style="border: 1px solid #000; padding: 8px;">2</td>
          <td style="border: 1px solid #000; padding: 8px;">Renault Clio</td>
          <td style="border: 1px solid #000; padding: 8px;">1999</td>
          <td style="border: 1px solid #000; padding: 8px;">1200</td>
          <td style="border: 1px solid #000; padding: 8px;">1</td>

      </tr>
      <tr>
          <td style="border: 1px solid #000; padding: 8px;">3</td>
          <td style="border: 1px solid #000; padding: 8px;">Renault Clio dci</td>
          <td style="border: 1px solid #000; padding: 8px;">2019</td>
          <td style="border: 1px solid #000; padding: 8px;">8500</td>
          <td style="border: 1px solid #000; padding: 8px;">1</td>
      </tr>
      <tr>
        <td style="border: 1px solid #000; padding: 8px;">4</td>
        <td style="border: 1px solid #000; padding: 8px;">Ford Fiesta Tdci</td>
        <td style="border: 1px solid #000; padding: 8px;">2022</td>
        <td style="border: 1px solid #000; padding: 8px;">10000</td>
        <td style="border: 1px solid #000; padding: 8px;">1</td>
    </tr>
  </tbody>
</table>
<p id="tutorial-instructions">The RFD <b>Model<sub>&le;4</sub>, Year<sub>&le;1</sub> -> Price<sub>&le;500</sub></b> holds on this dataset, since similar models with similar years have a similar price <b>(4, 1,and 500 are the similarity thresholds).</b> In fact, the first and the third tuple (rows) have similar values for the attributes <b>Model</b> and <b>Year</b> and they also have values for the attribute <b>Price</b> that differ for less than the similarity threshold.</p>
<p id="tutorial-instructions">After the <b id="strong-text-green">insertion</b> of a new tuple, an existing RFD can be invalidated only if the new tuple has similar values on the LHS with respect other tuples but it has different values on the RHS.  In this case, a <b id="strong-text-green">specialized RFD with additional attributes on the LHS </b> may be valid on the dataset.</p>
<p id="tutorial-instructions">For example, suppose that we add tuple 5 to the previous dataset: </p>
<table id="rfd-example-table" class="table table-striped table-bordered" style="width:100%; border-collapse: collapse;">
  <thead>
      <tr>
          <th style="border: 1px solid #000; padding: 8px;">#</th>
          <th style="border: 1px solid #000; padding: 8px;">Model</th>
          <th style="border: 1px solid #000; padding: 8px;">Year</th>
          <th style="border: 1px solid #000; padding: 8px;">Price</th>
          <th style="border: 1px solid #000; padding: 8px;"># Owners</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="border: 1px solid #000; padding: 8px;">1</td>
          <td style="border: 1px solid #000; padding: 8px;">Renault Clio</td>
          <td style="border: 1px solid #000; padding: 8px;">2018</td>
          <td style="border: 1px solid #000; padding: 8px;">8000</td>
          <td style="border: 1px solid #000; padding: 8px;">1</td>

      </tr>
      <tr>
          <td style="border: 1px solid #000; padding: 8px;">2</td>
          <td style="border: 1px solid #000; padding: 8px;">Renault Clio</td>
          <td style="border: 1px solid #000; padding: 8px;">1999</td>
          <td style="border: 1px solid #000; padding: 8px;">1200</td>
          <td style="border: 1px solid #000; padding: 8px;">1</td>

      </tr>
      <tr>
          <td style="border: 1px solid #000; padding: 8px;">3</td>
          <td style="border: 1px solid #000; padding: 8px;">Renault Clio dci</td>
          <td style="border: 1px solid #000; padding: 8px;">2019</td>
          <td style="border: 1px solid #000; padding: 8px;">8500</td>
          <td style="border: 1px solid #000; padding: 8px;">1</td>
      </tr>
      <tr>
        <td style="border: 1px solid #000; padding: 8px;">4</td>
        <td style="border: 1px solid #000; padding: 8px;">Ford Fiesta Tdci</td>
        <td style="border: 1px solid #000; padding: 8px;">2022</td>
        <td style="border: 1px solid #000; padding: 8px;">10000</td>
        <td style="border: 1px solid #000; padding: 8px;">1</td>
    </tr>
    <tr style="background-color: #2CD200;">
      <td style="border: 1px solid #000; padding: 8px;">5</td>
      <td style="border: 1px solid #000; padding: 8px;">Renault Clio dci</td>
      <td style="border: 1px solid #000; padding: 8px;">2019</td>
      <td style="border: 1px solid #000; padding: 8px;">5500</td>
      <td style="border: 1px solid #000; padding: 8px;">3</td>
  </tr>
  </tbody>
</table>
<p id="tutorial-instructions">The RFD <b>Model<sub>&le;4</sub>, Year<sub>&le;1</sub> -> Price<sub>&le;500</sub></b> does not hold anymore, since tuple 5 has a similar model and a similar year with respect to tuple 1 and 3, but has a differnt price.</p>

<p id="tutorial-instructions">Intead, after the <b id="strong-text-red">deletion</b> of a tuple, a <b id="strong-text-red">generalized RFD with a subset of attributes on the LHS </b> may be valid on the dataset if the deleted tuple had similar values on the LHS with respect other tuples but it had different values on the RHS. </p>
<h3>The Ryan Tool</h3>
<p id="tutorial-instructions">The RYAN tool allows to compare RFD results from discovery processes performed
              at different time instants, allowing interactive analysis through visual components. One of the most
              important features that distinguishes RYAN from is the integration of LLMs to obtain a textual explanation of how and why a
              particular RFD has evolved over time</p>


 <!-- Slideshow container -->
<div class="slideshow-container">
  <!-- Slides -->
  <div class="mySlides">
      <img src="/static/Images/Home.png" style="width:100%">
  </div>

  <div class="mySlides">
      <img src="/static/Images/MainPage.png" style="width:100%">
  </div>

  <div class="mySlides">
      <img src="/static/Images/Navigation.png" style="width:100%">
  </div>

  <div class="mySlides">
      <img src="/static/Images/Navigation2.png" style="width:100%">
  </div>

  <!-- Previous and next buttons -->
  <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
  <a class="next" onclick="plusSlides(1)">&#10095;</a>
</div>

<!-- Caption container -->
<div class="caption-container">
  <div class="caption">This is the first screenshot showing the main interface of the Ryan Tool.</div>
</div>

<!-- Dots/circles navigation -->
<div style="text-align:center; margin-top: 10px;">
  <span class="dot" onclick="currentSlide(1)"></span> 
  <span class="dot" onclick="currentSlide(2)"></span> 
  <span class="dot" onclick="currentSlide(3)"></span> 
  <span class="dot" onclick="currentSlide(4)"></span> 
</div>

<!-- Content after the slideshow -->
<div style="margin-top: 20px;">
  <h3>Task Description</h3>
  <p id="objective-text"></p>
</div>

<h3>Task Description</h3>
<p id="objective-text"></p> <!-- Questa è la parte variabile -->
   
</div>
</div>



    </div>


<div class="col-lg-13" style="display: none;" id="sezioneRisultati">
  <span><br></span>
  <table id="risultati" class="table table-striped table-bordered" style="width:100%">
      <thead>
      <tr>
          <th>LHS of t1</th>
          <th>RHS of t1</th>
          <th>Type</th>
          <th>LHS of t2</th>
          <th>RHS of t2</th>
          <th>Explain</th>
          <th>Interact</th>

      </tr>
      </thead>
      <tbody id="bodyrisultati"></tbody>
      <tfoot>
      </tfoot>
  </table>
</div>



<script>
    // Seleziona l'elemento del pulsante del tutorial e l'overlay
    const tutorialButton = document.getElementById('tutorial-button');
    const tutorialOverlay = document.getElementById('tutorial-overlay');
    const closeBtn = document.getElementById('close-btn');
    const objectiveText = document.getElementById('objective-text');


    // Array di obiettivi
    const objectives = [
        "Task 1: Load",
        "Task 2: ",
        "Task 3:"
    ];

    // Genera un numero casuale all'interno del range dell'array
    const randomIndex = Math.floor(Math.random() * objectives.length);

    // Imposta l'obiettivo casuale nel testo del tutorial
    objectiveText.textContent = objectives[randomIndex];

    // Mostra l'overlay quando il pulsante viene cliccato
    tutorialButton.addEventListener('click', () => {
        tutorialOverlay.style.display = 'block';
    });

    // Nascondi l'overlay quando il pulsante di chiusura viene cliccato
    closeBtn.addEventListener('click', () => {
        tutorialOverlay.style.display = 'none';
    });
</script>

<script>
let slideIndex = 1;
showSlides(slideIndex);

// Next/previous controls
function plusSlides(n) {
    showSlides(slideIndex += n);
}

// Thumbnail image controls
function currentSlide(n) {
    showSlides(slideIndex = n);
}

function showSlides(n) {
    let i;
    let slides = document.getElementsByClassName("mySlides");
    let dots = document.getElementsByClassName("dot");
    let captions = [
        "This is the first screenshot showing the main interface of the Ryan Tool.",
        "This screenshot demonstrates how to load data into the Ryan Tool.",
        "Here we see the comparison view of the old and new RFD results.",
        "Here we see the comparison view of the old and new RFD results."
    ];

    if (n > slides.length) {slideIndex = 1}    
    if (n < 1) {slideIndex = slides.length}

    // Nascondi tutte le slide
    for (i = 0; i < slides.length; i++) {
        slides[i].style.display = "none";  
    }

    // Rimuovi la classe "active" da tutti i dots
    for (i = 0; i < dots.length; i++) {
        dots[i].className = dots[i].className.replace(" active", "");
    }

    // Mostra la slide attuale
    slides[slideIndex-1].style.display = "block";  

    // Aggiungi la classe "active" al dot corrispondente
    dots[slideIndex-1].className += " active";

    // Aggiorna la caption
    document.querySelector(".caption").innerText = captions[slideIndex-1];
}

</script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
      showSlides(slideIndex);
  });
</script>

</body>

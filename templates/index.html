<head>

  <link rel="stylesheet" href="/static/style.css">

    <!--  SUNBURST LIBRARIES -->
    <script src="/static/sunburst.js"></script>
    <script src="/static/dataset_loader.js"></script>
    <script src="https://unpkg.com/d3"></script>

    <!--  COLLAPSIBLE TREE LIBRARIES -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.0/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="https://cdn.datatables.net/1.12.0/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.12.0/js/dataTables.bootstrap4.min.js"></script>
    <!--<script src="dndTree.js"></script>-->
</head>



<body>
  <div class="header">

    <!--Content before waves-->
    <div class="inner-header flex">
    <!--Just the logo.. Don't mind this-->
      <img src="/static/Images/logo_dais_bianco.png" onclick="location.reload();" class="logo">
    </div>


    <!--Waves Container-->
    <div>
    <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
    <defs>
    <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
    </defs>
    <g class="parallax">
    <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(255,255,255,0.7" />
    <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(255,255,255,0.5)" />
    <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(255,255,255,0.3)" />
    <use xlink:href="#gentle-wave" x="48" y="7" fill="#fff" />
    </g>
    </svg>
    </div>
    <!--Waves end-->

    </div>
    <!--Header ends-->

    <!--Content starts-->

    <!--Content ends-->


  <div class="" style="margin: 23px;">

    <div class="row">


      <div class="col-lg-12" >
        <fieldset class="border p-2" id="load_dataset">
        <legend class="w-auto" style="font-size: 20px!important; margin-bottom: 0px;"> STEP 1: Upload Dataset
        </legend>
        <div class="input-group">
          <input  class="form-control form-control-lg" type="file" name="file2" id="file2">
          <button class="btn btn-primary" type="button" id="load1" onclick="load_data()" >Upload</button>
        </div>
       </fieldset>
      </div>



      <div class="col-lg-12" >
        <fieldset class="border p-2" id="load_json">
        <legend class="w-auto" style="font-size: 20px!important; margin-bottom: 0px;"> STEP 2: Upload results and Generate Plots
        </legend>
        <div class="input-group">
          <input  class="form-control form-control-lg" type="file" name="file1" id="file1"  disabled="true">
          <button class="btn btn-primary" type="button" id="load2" onclick="createchart()" disabled="true">Upload</button>
        </div>
       </fieldset>
      </div>


      <div class="col-lg-6" id="contenitore">
        <div id="tree-container"></div>
      </div>
      <div class="col-lg-6">
        <div id="sunburst"></div>
      </div>

    <!-- Icona del tutorial -->
    <div id="tutorial-button">
        <img src="/static/Images/info.gif" alt="Tutorial Icon">
    </div>

    <!-- Overlay del tutorial -->
    <div id="tutorial-overlay">
        <div id="tutorial-content">
           <img id="close-btn" src="/static/Images/close.png" alt="Chiudi" />
           <center><h2>Tutorial</h2></center>
            <p id="tutorial-instructions">In relational databases, a Relaxed Functional Dependency (RFD) is an integrity constraint X -> Y  between two sets of attributes X and Y, meaning that if two tuples have similar value on X, then they must have similar values on Y. X is named Left Hand Side (LHS), while Y is the Right Hand Side (RHS). Two values of an attribute are similar if their distance is  lower than the similarity threshold defined on that attribute. The function to assess similarity is edit distance for strings and difference for numbers. </p> 
            <p id="tutorial-instructions">For example, consider the following dataset: </p>
            <!-- Esempio Tabellare -->
            <table id="rfd-example-table" class="table table-striped table-bordered" style="width:100%; border-collapse: collapse;">
                <thead>
                    <tr>
                        <th style="border: 1px solid #000; padding: 8px;">Model</th>
                        <th style="border: 1px solid #000; padding: 8px;">Year</th>
                        <th style="border: 1px solid #000; padding: 8px;">Price</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="border: 1px solid #000; padding: 8px;">Renault Clio</td>
                        <td style="border: 1px solid #000; padding: 8px;">2018</td>
                        <td style="border: 1px solid #000; padding: 8px;">8000</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #000; padding: 8px;">Renault Clio</td>
                        <td style="border: 1px solid #000; padding: 8px;">1999</td>
                        <td style="border: 1px solid #000; padding: 8px;">1200</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #000; padding: 8px;">Renault Clio dci</td>
                        <td style="border: 1px solid #000; padding: 8px;">2019</td>
                        <td style="border: 1px solid #000; padding: 8px;">8500</td>
                    </tr>
                    <tr>
                      <td style="border: 1px solid #000; padding: 8px;">Ford Fiesta Tdci</td>
                      <td style="border: 1px solid #000; padding: 8px;">2022</td>
                      <td style="border: 1px solid #000; padding: 8px;">10000</td>
                  </tr>
                </tbody>
            </table>
            <p id="tutorial-instructions">The RFD <b>Model<sub>4</sub>, Year<sub>1</sub> -> Price<sub>500</sub></b> holds on this dataset, since similar models with similar years have a similar price <b>(4, 1,and 500 are the similarity thresholds).</b> </p>
            <p id="tutorial-instructions">After the <b id="strong-text-green">insertion</b> of a new tuple, an existing RFD can be invalidated only if the new tuple has similar values on the LHS with respect other tuples but it has different values on the RHS.  In this case, a <b id="strong-text-green">specialized RFD with additional attributes on the LHS </b> may be valid on the dataset.</p>
            <p id="tutorial-instructions">Intead, after the <b id="strong-text-red">deletion</b> of a tuple, a <b id="strong-text-red">generalized RFD with a subset of attributes on the LHS </b> may be valid on the dataset if the deleted tuple had similar values on the LHS with respect other tuples but it had different values on the RHS. </p>
            <p id="tutorial-instructions"></p>
            <p id="objective-text"></p> <!-- Questa Ã¨ la parte variabile -->
      </div>
    </div>



    </div>


<div class="col-lg-13" style="display: none;" id="sezioneRisultati">
  <span><br></span>
  <table id="risultati" class="table table-striped table-bordered" style="width:100%">
      <thead>
      <tr>
          <th>LHS of t1</th>
          <th>RHS of t1</th>
          <th>Type</th>
          <th>LHS of t2</th>
          <th>RHS of t2</th>
          <th>Explain</th>
          <th>Interact</th>

      </tr>
      </thead>
      <tbody id="bodyrisultati"></tbody>
      <tfoot>
      </tfoot>
  </table>
</div>


<script>
    // Seleziona l'elemento del pulsante del tutorial e l'overlay
    const tutorialButton = document.getElementById('tutorial-button');
    const tutorialOverlay = document.getElementById('tutorial-overlay');
    const closeBtn = document.getElementById('close-btn');
    const objectiveText = document.getElementById('objective-text');


    // Array di obiettivi
    const objectives = [
        "Obiettivo 1: Navigate the tree.",
        "Obiettivo 2: Completa il quiz sulla sicurezza.",
        "Obiettivo 3: Esplora la sezione delle FAQ.",
        "Obiettivo 4: Guarda il video introduttivo."
    ];

    // Genera un numero casuale all'interno del range dell'array
    const randomIndex = Math.floor(Math.random() * objectives.length);

    // Imposta l'obiettivo casuale nel testo del tutorial
    objectiveText.textContent = objectives[randomIndex];

    // Mostra l'overlay quando il pulsante viene cliccato
    tutorialButton.addEventListener('click', () => {
        tutorialOverlay.style.display = 'block';
    });

    // Nascondi l'overlay quando il pulsante di chiusura viene cliccato
    closeBtn.addEventListener('click', () => {
        tutorialOverlay.style.display = 'none';
    });
</script>


</body>
